<html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <title>生成随机天书</title>
  </head>
  <body onload='intoDiv(getCharMany(50,"",""))'>
      <style>
          @font-face {
            font-family: "XSJ kage";
            src: url(https://guikanntschjov.github.io/CheapFonts/XSJ%20kage.ttf)
          }
          div {border: black 1px solid;font-size:300%;font-family:'XSJ kage'}
      </style>
  
  <h2>天书</h2>
    <div id="textInput" contenteditable="plaintext-only"></div>

    <button onclick='intoDiv(getCharMany(50,"",""))'>析世鉴</button>

    <button onclick='intoDiv(getCharMixed(50, 0.2,"","","",""))'>析世鉴（允许真文字）</button>

    <button onclick='intoDiv(getCharMixed(10, 0.3, "","","",""))'>全所为</button>

    <button onclick='intoDiv(getCharPunct(15, "","getCharMixed(1, 0.3, &#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;)"))'>全所为（带标点）</button>

    <button onclick='intoDiv(getCharMany(15,"",""))'>全职猎人</button>

    <button onclick='intoDiv(getCharPunct(30, "","getChar(&#39;&#39;,&#39;&#39;)"))'>全职猎人（带标点与真字）</button>

    <button onclick='intoDiv(getCharMany(150,"",""))'>遍黑体真汉字</button>

    <button onclick='intoDiv(getCharPunct(150, "","getChar(&#39;&#39;,&#39;&#39;)"))'>遍黑体真汉字（带真标点）</button>

    <button onclick='intoDiv(getCharPunct(150, "","getChar(&#39;&#39;,&#39;&#39;)"))'>遍黑体真汉字（带伪标点）</button>

    <button onclick='intoDiv(getGlyphWikiKana(70))'>Glyphwiki真假名</button>
    
    <button onclick='intoDiv(getLatin(200))'>KK&MUFI真拉丁字母</button>
    
    <button onclick='intoDiv(getCharPunct(50, "","getWord()"))'>究极缝合怪</button>

<script>
    function intoDiv(str) {
        document.getElementById("textInput").innerText = str;
    }

    function getChar(lowerBound, upperBound) {
        // 获取下界字符的编码
        const start = lowerBound.charCodeAt(0);
        // 获取上界字符的编码
        const end = upperBound.charCodeAt(0);
        // 获取指定范围内的随机整数
        const randomNum = Math.floor(Math.random() * (end - start + 1) + start);
        // 将整数转换为对应字符
        return String.fromCharCode(randomNum);
    }

    function getCharMany(count, lowerBound, upperBound) {
        let result = "";
        for (let i = 0; i < count; i++) {
            result += getChar(lowerBound, upperBound);
        }
        return result;
    }

    function getCharMixed(count, odd, lowerBound1, upperBound1, lowerBound2, upperBound2) {
        let result = ""; // 存放生成的字符
        for (let i = 0; i < count; i++) {
            if (Math.random() < odd) {
                result += getChar(lowerBound1, upperBound1);
            } else {
                result += getChar(lowerBound2, upperBound2);
            }
        }
        return result;
    }

    // 随机从字符串选择一个字符
    function getFromString(str) {
        let result = "";
        const index = Math.floor(Math.random() * str.length);
        result += str.charAt (index); // 随机从字符串选择一个字符
        return result;
    }

    function getCharPunct(count, punct, char) {
        let result = "";
        let lastIsPunct = true; 
        // 上一个字符是否为标点符号。不以标点符号开头
        for (let i = 0; i < count - 2; i++) {
            if (lastIsPunct) {
                result += eval(char)
                lastIsPunct = false;
            }
            if (Math.random() < 0.15) {
                result += getFromString(punct);
                lastIsPunct = true; 
            } else {
                result += eval(char);
            }
        }
        result += eval(char);
        result += getFromString(punct);
        return result;
    }

    function getCharDakuten(lowerBound, upperBound, dakuten) {
        let result = "";
        result += getChar(lowerBound, upperBound)
        if (Math.random() < 0.1) {
            result += getFromString(dakuten);
        }
        return result;
    }
    function getGlyphWikiKana(count) {
        let result = "";
        var c = 0.9; 
        while (result.length < count) {
            const r = Math.random() * c
            if (r < 0.6) {
                var cc = 0.8; 
                for (let i = 0; i < Math.random() * 5; i++) {
                    const rr = Math.random() * cc
                    if (rr < 0.8) {
                        result += getCharDakuten("","","")
                        cc = 1; 
                    } else {
                        result += getChar("","")
                        cc = 0.8; 
                    }
                }
                c = 1;
            } else if (r < 0.8) {
                var cc = 0.8; 
                for (let i = 0; i < Math.random() * 7; i++) {
                    const rr = Math.random() * cc
                    if (rr < 0.8) {
                        result += getCharDakuten("","","")
                        cc = 1; 
                    } else {
                        result += getChar("","")
                        cc = 0.8; 
                    }
                }
                c = 1;
            } else {
                result += getChar("","")
                c = 0.8;
            }
        }
        result += getChar("","")
        result += ""
        return result;
    }

    function getLatin(count) {
        let result = "";
        var c = 0.9; 
        result += getChar("","")
        while (result.length < count) {
            for (let i = 0; i < Math.random()*12; i++) {
                const r = Math.random() * c;
                if (r < 0.6) {
                    // 生成基线字母
                    result += getChar("","")
			  const rr = Math.random()
                    if (rr < 0.05) {
                        result += getChar("","")
                    }
                    c = 1;
                } else if (r < 0.7) {
                    // 生成上高字母
                    result += getChar("","")
                    c = 0.75;
                } else if (r < 0.8) {
                    // 生成下伸或又高又伸字母
                    const rr = Math.random()
                    if (rr < 0.8) {
                        result += getChar("","")
                    } else {
                        result += getChar("","")
                    }
                    c = 0.6;
                }
            }
            const rr = Math.random()
            if (rr < 0.6) {
                result += " "
            } else if (rr < 0.9) {
                punct = ""
                result += getFromString(punct);
                result += " "
            } else {
                punct = ""
                result += getFromString(punct);
                result += " "
                result += getChar("","")
            }
        }
        result += getChar("","")
        punct = ""
        result += getFromString(punct);
        return result;
    }

    function getKatakanaMix(count) {
        let result = "";
        var cc = 0.8; 
        for (let i = 0; i < Math.random() * Math.random() * 7; i++) {
            const rr = Math.random() * cc
            if (rr < 0.65) {
            result += getCharDakuten("","","")
            cc = 1; 
            } else if (rr < 0.7) {
                result += getFromString("");
                cc = 1; 
            } else {
                if (Math.random() < 0.5) {
                    result += getChar("","")
                } else {
                    result += getFromString("");
                }
                cc = 0.7; 
            }
        }
        return result;
    }

    function getHiraganaMix(count) {
        var cc = 0.8; 
        let result = "";
        for (let i = 0; i < Math.random() * count; i++) {
                const rr = Math.random() * cc
                if (rr < 0.7) {
                    result += getCharDakuten("","","")
                    cc = 1; 
                } else if (rr < 0.8) {
                    result += getFromString("");
                    cc = 1; 
                } else {
                    result += getChar("","")
                    cc = 0.8; 
                }
            }
        return result;
    }
    
    function getHanziMix(count) {
        let result = "";
        for (let i = 0; i < Math.random() * count; i++) {
                const rr = Math.random()
                if (rr < 0.85) {
                    result += getCharMixed(1, 0.2,"","","","")
                } else if (rr < 0.95) {
                    result += getChar("","")
                } else {
                    result += getChar("","")
                }
            }
        return result;
    }

    function getWord() {
        let result = "";
        const r = Math.random()
        if (r < 0.3) {
            result += getHiraganaMix(5)
        } else if (r < 0.8) {
            result += getHanziMix(2) + getHiraganaMix(4)
        } else if (r < 0.9) {
            result += getKatakanaMix(7)
        } else if (r < 0.97) {
            result += getHanziMix(5)
        } else {
            result += getChar("","") + getCharMany(Math.random() * 3, "","")
        }
        return result;
    }

</script>
  
  <h2>空白草稿文本框</h2>
    <div contenteditable="plaintext-only" style="min-height:400px;width:90%;"></div>
  
  <h2>复制用</h2>
    <div contenteditable="true">
JSX<br>
<br>

    </div>